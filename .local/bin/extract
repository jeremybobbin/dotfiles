#!/bin/sh
methods="$XDG_BIN_HOME/extract.d"

list_methods() {
	ls -1 "$methods"
}

if [ "$1" = "-l" ]; then
	list_methods
	exit 0
fi

if [ "$1" = "-d" ]; then
	allow_duplicates=true
	shift
fi

script="$methods/$1"

if [ ! -e "$script" ] || [ -d "$script" ]; then
	echo "Invalid argument. Valid arguments:" >&2;
	list_methods
	exit 1;
fi

if [ "$allow_duplicates" ]; then
	"$script"
else
	"$script" | unique
fi

