#!/bin/sh 
SOURCE="$PWD"
DEPS="$HOME/.local/src"
PREFIX=${PREFIX:-"$HOME/.local"}

# pull submodules
echo initializing submodules 1>&2
git submodule update --init --recursive

# compile & install executibles
for i in $(find $DEPS/* -maxdepth 0 -type d); do
	echo installing "$i" 1>&2
	cd "$i"
	make install "PREFIX=$PREFIX"
	cd ..
done

# copy dotfiles
[ -d "$SOURCE/etc/skel/" ] &&
cp -a "$SOURCE/etc/skel/." "$HOME"

# crontab
echo sourcing crontab 1>&2
crontab "$HOME/.config/crontab"
