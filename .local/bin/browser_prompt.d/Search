#!/bin/sh
engines_dir="$DIR/engines"

if [ "$1" ] && [ -x "$engines_dir/$1" ]; then
	engine="$1"
else
	engine="$( ls "$engines_dir" | dmenu_cache -s 'Search' -i -p 'Where to search: ')"
fi

script="$engines_dir/$engine"
[ ! -x "$script" ] && exit 1

query=$(printf '' | dmenu_cache "$engine" -l 10 -i -p "Searching $engine")

[ ! "$query" ] || [ ! "$?" ] && exit 1

"$script" "$query"
