#!/bin/sh
send() {
	$EDITOR --servername $VIM_SERVERNAME --remote-send "$*"
}

# send ex command
excmd() {
	send "<C-W>:$*<Enter>"
}

die() {
	echo "$*" 1>&2
	exit 1
}

while getopts ":e:" opt; do 
	case "${opt}" in
		e) excmd "$OPTARG"
			;;
		\?) die "Invalid option: $OPTARG"
			;;
		:) die "Invalid option: $OPTARG requires an argument"
			;;
	esac
done
shift $((OPTIND - 1))

[ $# -gt 0 ] && send "$*"
