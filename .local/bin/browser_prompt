#!/bin/sh
cache="$XDG_CACHE_HOME/browser_prompt"
export DIR=$XDG_BIN_HOME/browser_prompt.d

# User should be able to $ browser_prompt Search Google
if [ "$1" ] && [ -x "$DIR/$1" ]; then
	method=$1
	shift
else
	method=$({
		tac "$cache" || touch "$cache";
		find "$DIR" -maxdepth 1 -type f -printf '%f\n';
	} | unique | dmenu_color -i -p "How start:")

fi

[ ! "$method" ] && exit

url=$("$DIR/$method" "$@")

[ ! "$url" ] && exit

$BROWSER $url

echo "$method" >> $cache
