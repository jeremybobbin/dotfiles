source "gpg -dq $HOME/.passwords/neomutt.gpg |"

set sendmail="/usr/bin/msmtp"
set use_from=yes

set header_cache = "~/.cache/mutt/headers"
set message_cachedir = "~/.cache/mutt/bodies"

set pipe_decode=yes # Gets rid of '=' line breaks
set sidebar_visible = yes
set mailcap_path 	= ~/.config/neomutt/mailcap
auto_view text/html

set sleep_time=0

folder-hook 'jer.cx' 'source ~/.config/neomutt/jer.cx'
macro index <f2> '<enter-command>source ~/.config/neomutt/jer.cx<enter><change-folder>!<enter>'

folder-hook 'lambdal.com' 'source ~/.config/neomutt/lambdal.com'
macro index <f3> '<enter-command>source ~/.config/neomutt/lambdal.com<enter><change-folder>!<enter>'

# Default Box
source ~/.config/neomutt/lambdal.com


# Cache
set header_cache = ~/.cache/mutt
set message_cachedir = "~/.cache/mutt"

# Arch wiki Vim keys
bind pager j next-line
bind pager k previous-line
bind attach,index,pager \CD next-page
bind attach,index,pager \CU previous-page
bind pager g top
bind pager G bottom
bind attach,index g first-entry
bind attach,index G last-entry

bind index,pager B sidebar-toggle-visible
bind index "^" imap-fetch-mail

macro attach 'V' "<pipe-entry>cat >~/.cache/mutt/mail.html && qutebrowser ~/.cache/mutt/mail.html && rm ~/.cache/mutt/mail.html<enter>"
macro attach 'L' "<pipe-entry>extract URL | xargs $BROWSER<enter>"

color hdrdefault blue default
color quoted blue default
color signature blue default
color attachment red default
color prompt brightmagenta default
color message brightred default
color error brightred default
color indicator default red
color status default blue
color tree white default
color normal white default
color markers red default
color search white default
color tilde brightmagenta default
color index blue default ~F
color index red default "~N|~O"
